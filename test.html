<html lang="en">
  <head>
    <meta name="google-signin-scope" content="profile email">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta name="google-signin-client_id" content="853574560806-ipsfv26fdrkp8qh1tkuaogaevgf1q6i8.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <style type="text/css">
      #logout
      {
        display: none;
      }
    </style>
  </head>
  <body>
    <center><img src="" id="profilepic"></center>
  <center>
  <div style="margin-top: 200px">
    <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
    <br>
    <br>
    <a onclick="signOut();" class="btn btn-danger" id="logout" style="width: 40%">Sign out</a>
  </div>
  <br>
  <div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="false" onlogin="checkLoginState();" scope="email"></div>



<div id="fb-root"></div>
<br>
<br>
<fb:login-button scope="public_profile" onlogin="checkLoginState();">
</fb:login-button>

</center>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      document.getElementById("profilepic").src="";
      function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        alert("Email: " + profile.getEmail());
        document.getElementById("profilepic").src=profile.getImageUrl();
        document.getElementById("logout").style.display="block";
        pass=true;
      };
    function signOut()
    {
      var auth2 = gapi.auth2.getAuthInstance();
      auth2.signOut().then(function () {
        document.getElementById("profilepic").src="";
      document.getElementById("logout").style.display="none";
    });
  }
</script>
<script>

  var socket = io().connect('https://cqtesting.herokuapp.com');
  function checkLoginState() {
  FB.getLoginStatus(function(response)
  {
    if (response.status=="connected")
    {
    FB.api('/me', { locale: 'tr_TR', fields: 'email' },
          function(response) {
            alert(response.me);
            alert(response.email);
            document.getElementById("profilepic").src="https://graph.facebook.com/"+response.authResponse.userID+"/picture";
          }
      );
     document.getElementById("profilepic").src="https://graph.facebook.com/"+response.authResponse.userID+"/picture";
    socket.emit('facebook', response);
  }
  else
  {
    alert("Something Welnt wrong")
  }
  });
}
</script>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.0&appId=401956300319799&autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
  </body>
</html>