<html lang="en">
  <head>
    <meta name="google-signin-scope" content="profile email">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta name="google-signin-client_id" content="853574560806-ipsfv26fdrkp8qh1tkuaogaevgf1q6i8.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <style type="text/css">
      #logout
      {
        display: none;
      }
    </style>
  </head>
  <body>
    <center><img src="https://graph.facebook.com/1676452449141655/picture" id="profilepic"></center>
  <center>
  <div style="margin-top: 200px">
    <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
    <br>
    <br>
    <a onclick="signOut();" class="btn btn-danger" id="logout" style="width: 40%">Sign out</a>
  </div>
  <br>
  <div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="false" onlogin="checkLoginState();"></div>


<button onclick="getCurrentUserInfo()">Test</button>
<div id="fb-root"></div>

  </center>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      document.getElementById("profilepic").src="";
      function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        //alert("ID: " + profile.getId()); // Don't send this directly to your server!
        //alert('Full Name: ' + profile.getName());
        //alert('Given Name: ' + profile.getGivenName());
        //alert('Family Name: ' + profile.getFamilyName());
        //alert("Image URL: " + profile.getImageUrl());
        alert("Email: " + profile.getEmail());
        document.getElementById("profilepic").src=profile.getImageUrl();
        document.getElementById("logout").style.display="block";
        pass=true;
        // The ID token you need to pass to your backend:
        //var id_token = googleUser.getAuthResponse().id_token;
        //alert("ID Token: " + id_token);
      };
    </script>
<script type="text/javascript">
  FB.getLoginStatus(function(response) {
      if (response.status == 'connected') {
        getCurrentUserInfo(response)
      } else {
        FB.login(function(response) {
          if (response.authResponse){
            getCurrentUserInfo(response)
          } else {
            alert('Auth cancelled.')
          }
        }, { scope: 'email' });
      }
    });

  function getCurrentUserInfo() {
      FB.api('/me', function(userInfo) {
        alert(userInfo.name + ': ' + userInfo.email);
      });
</script>
<script>
  var socket = io().connect('https://cqtesting.herokuapp.com');
  //function checkLoginState() {
  /*FB.getLoginStatus(function(response) {
     //alert(response.authResponse.userID);
      document.getElementById("profilepic").src="https://graph.facebook.com/"+response.authResponse.userID+"/picture";
      socket.emit('facebook', response);
  });
}*/


  function signOut()
    {
      var auth2 = gapi.auth2.getAuthInstance();
      auth2.signOut().then(function ()
      {
        document.getElementById("profilepic").src="";
        document.getElementById("logout").style.display="none";
    });
  }
</script>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.0&appId=401956300319799&autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
  </body>
</html>